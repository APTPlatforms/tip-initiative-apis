openapi: "3.0.0"
info:
  version: 4.2.0
  title: Create a proposal to send to the buyer system
  description: Seller/Proposal Schemas, based on TIP 4.0.0 documentation
  termsOfService: http://placeholderdomain.io/terms/
  contact:
    name: TIP Initiative
    email: tipinitiative@frontrowadvisory.com
    url: http://placeholderdomain.io
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

paths: {} # no paths

components:
  schemas:
    ProposalObject:
      properties:
        transactionHeader:
          $ref: 'commonSchemas.yaml#/components/schemas/TransactionHeader'
        referenceIds:
          description: Information grouping all reference ids and their source that are associated to the proposal
          type: array
          items:
            $ref: 'commonSchemas.yaml#/components/schemas/ReferenceId'
        expirationDate:
          description: Date in which the proposalâ€™s pricing and audience estimates expire
          type: string
          format: date-time
        buyer:
          $ref: 'commonSchemas.yaml#/components/schemas/Buyer'
        commission:
          description: Buyer commission percentage
          type: number  
          format: double 
        advertiser:
          $ref: 'commonSchemas.yaml#/components/schemas/Advertiser'
        brand:
          $ref: 'commonSchemas.yaml#/components/schemas/Brand'
        product:
          $ref: 'commonSchemas.yaml#/components/schemas/Product'
        cpeCode:
          $ref: 'commonSchemas.yaml#/components/schemas/CpeCode'
        contacts:
          type: array
          items:
            $ref: 'commonSchemas.yaml#/components/schemas/Contact'
        revenueType:
          description: How the proposal is being negotiated for payment terms
          type: string
          enum: 
          - Cash
          - Barter
          - Trade
        businessType:
          description: Seller-defined type of business 
          type: string  # TODO any constraints?
        localNational:
          description: Market Type for Proposal 
          type: string
          enum:
          - local
          - National
        dealYear:
          description: The broadcast year in which the proposal is being negotiated for
          type: integer
          format: int32
        billingCalendar:
          description: The calendar in which the proposal is being negotiated
          type: string
          enum: 
          - Broadcast
          - Calendar
        billingCycle:
          description: The billing within the calendar the units should be billed 
          type: string
          enum:
          - Month
          - Week
        equivalized:
          description: true means impressions are equivalized, false means impressions are unequivalized
          type: boolean
        dateWindow:
          description: An array of Date intervals
          type: array
          items:
            $ref: 'commonSchemas.yaml#/components/schemas/DateWindow'
        cancellationTerms:
          $ref: 'commonSchemas.yaml#/components/schemas/CancellationTerms'
        timeSeparation:
          description: List of unit lengths being proposed with separation agreement by a specific length of time; separation may be across all lengths
          type: array
          items:
            $ref: 'commonSchemas.yaml#/components/schemas/TimeSeparation'
        termsOfSales:
          description: The information specific to payment terms, preemption status, etc.
          type: string  # TODO any constraints?
        externalComment:
          description: Free form text to accommodate transaction comments and/or activities outside the TIP flow
          type: string  # TODO any constraints?
        rateCard:
          $ref: 'commonSchemas.yaml#/components/schemas/RateCard'
        currency:
          description: Currency in which the proposal is being negotiated
          $ref: 'commonSchemas.yaml#/components/schemas/Currency'
        mediaOutlets:
          description: an array of mediaoutlets included in the proposal
          type: array
          items:
            $ref: 'commonSchemas.yaml#/components/schemas/MediaOutlet'
        audienceSegments:
          description: an array of Audience Segments per media outlet 
          type: array
          items:
            $ref: 'commonSchemas.yaml#/components/schemas/AudienceSegment'
        salesElements:
          description: an array of sales elements in the proposal/transaction
          type: array
          items:
            $ref: 'commonSchemas.yaml#/components/schemas/SalesElementTransaction'
      required:
        - transactionHeader
        - referenceId
        - contact
        - buyer
        - commission
        - revenueType
        - businessType
        - equivalized
        - mediaOutlets

    # GetProposalsResponse:
    #   properties:
    #     Proposals:
    #       description: Array of proposals
    #       type: array
    #       items:
    #         $ref: '#/components/schemas/ProposalObject'

    # GetProposalsQueryObject:
    #   required:
    #     - limitCount     
    #   properties:
    #     dateStart:
    #       description: Start Date 
    #       type: string
    #       format: date-time
    #     dateEnd:
    #       description: End Date
    #       type: string
    #       format: date-time
    #     limitCount:
    #       description: Limit the number of items to return
    #       type: integer
    #       format: int32

    # ProposalCancel:
    #   required:
    #     - transactionHeader
    #     - referenceId
    #   properties:
    #     transactionHeader:
    #       $ref: 'commonSchemas.yaml#/components/schemas/TransactionHeader'
    #     referenceId:
    #       description: Information grouping all reference ids and their source that are associated to the proposal
    #       type: string # TODO any constraints?

    # RFPCancel:
    #   required:
    #     - transactionHeader
    #     - RFPId     
    #   properties:
    #     transactionHeader:
    #       $ref: 'commonSchemas.yaml#/components/schemas/TransactionHeader'
    #     RFPId:
    #       description: Buyer-generated unique identifier for the RFP
    #       type: string # TODO any constraints?



