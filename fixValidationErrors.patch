From 25fd7f70d80f89b82cd779590853fa5888422073 Mon Sep 17 00:00:00 2001
From: John Creecy <john.creecy@videa.tv>
Date: Wed, 2 Oct 2019 07:53:45 -0400
Subject: [PATCH 1/2] Fixing validation errors, untyped arrays and undefined
 URL parameter

---
 endpoints/invoice.yaml                        | 35 +++++++++----------
 endpoints/schemas/InvoiceSchemas.yaml         |  4 ++-
 .../schemas/commercialInstructionSchemas.yaml |  4 ++-
 3 files changed, 22 insertions(+), 21 deletions(-)

diff --git a/endpoints/invoice.yaml b/endpoints/invoice.yaml
index c395cd3..ef48cc7 100644
--- a/endpoints/invoice.yaml
+++ b/endpoints/invoice.yaml
@@ -49,33 +49,31 @@ paths:
             application/json:
               schema:
                 $ref: 'schemas/commonSchemas.yaml#/components/schemas/Error'
-  /seller/invoice/{id}:
+              
+  /seller/invoice/{invoiceId}:
     put:
       summary: Allows the seller to send to the buyer revised invoice information (No Request from buyer is Required)
-      description: Allows the seller to send to the buyer revised invoice information
       operationId: invoicePutSeller
-      requestBody:
-        description: Invoice body included in request
-        required: true
-        content:
-          application/json:
-            schema:
-              $ref: 'schemas/invoiceSchemas.yaml#/components/schemas/invoiceObject'
+      parameters:
+        -
+          name: invoiceId
+          in: path
+          required: true
+          description: The invoice Id
+          schema:
+            type: string
       responses:
         '200':
-          description: Request processed successfully
-          content:
-            application/json:
-              schema:
-                $ref: 'schemas/invoiceSchemas.yaml#/components/schemas/invoiceObject'
-        '404':
-          description: Requested invoice not found        
+          description: Request processed successfully 
+            # TODO define response payload schema
         default:
           description: unexpected error
           content:
             application/json:
               schema:
                 $ref: 'schemas/commonSchemas.yaml#/components/schemas/Error'
+
+  /seller/invoice/:   # TODO why not use invoiceId parameter to specify which invoice to delete, rather than last submitted?
     delete:
       summary: Allows the seller to request the removal of previously submitted invoice
       description: Allows the seller to request the removal of previously submitted invoice
@@ -83,13 +81,12 @@ paths:
       responses:
         '200':
           description: Request processed successfully
-        '404':
-          description: Invoice not found
+            # TODO define response payload schema
         default:
           description: unexpected error
           content:
             application/json:
               schema:
-                $ref: 'schemas/commonSchemas.yaml#/components/schemas/Error'       
+                $ref: 'schemas/commonSchemas.yaml#/components/schemas/Error'
         
       
diff --git a/endpoints/schemas/InvoiceSchemas.yaml b/endpoints/schemas/InvoiceSchemas.yaml
index 7faae34..bdaa021 100644
--- a/endpoints/schemas/InvoiceSchemas.yaml
+++ b/endpoints/schemas/InvoiceSchemas.yaml
@@ -37,7 +37,9 @@ components:
           $ref: 'commonSchemas.yaml#/components/schemas/transactionHeader'
         referenceId:
           description: Information grouping all reference ids and their source that are associated to the proposal
-          type: array # TODO any constraints?
+          type: array
+          items:
+            type: string
         invoiceDate:
           description: Date in which the original invoice was generated
           type: string
diff --git a/endpoints/schemas/commercialInstructionSchemas.yaml b/endpoints/schemas/commercialInstructionSchemas.yaml
index 0c47e4c..110f4fd 100644
--- a/endpoints/schemas/commercialInstructionSchemas.yaml
+++ b/endpoints/schemas/commercialInstructionSchemas.yaml
@@ -32,7 +32,9 @@ components:
           $ref: 'commonSchemas.yaml#/components/schemas/transactionHeader'
         referenceId:
           description: Information grouping all reference ids and their source that are associated to the proposal
-          type: array # TODO any constraints?
+          type: array
+          items: 
+            type: string # TODO any constraints?
         buyerlocation:
           $ref: 'commonSchemas.yaml#/components/schemas/buyerLocation'
         contact:
-- 
2.17.1.windows.2


From 4c19da8890ce2bbade1a85f9d22f5a46fd2981b4 Mon Sep 17 00:00:00 2001
From: John Creecy <john.creecy@videa.tv>
Date: Wed, 2 Oct 2019 08:10:03 -0400
Subject: [PATCH 2/2] Removing traililng whitespace from invoice

---
 endpoints/invoice.yaml | 1 -
 1 file changed, 1 deletion(-)

diff --git a/endpoints/invoice.yaml b/endpoints/invoice.yaml
index ef48cc7..c703f01 100644
--- a/endpoints/invoice.yaml
+++ b/endpoints/invoice.yaml
@@ -88,5 +88,4 @@ paths:
             application/json:
               schema:
                 $ref: 'schemas/commonSchemas.yaml#/components/schemas/Error'
-        
       
-- 
2.17.1.windows.2

